---
description: PokemonCardDatabaseの要件定義書です。
tags:
  - 要件定義書
---

# A.2.要件定義書

## A.要件分析
- データベース作成において重要な事前決定事項を調べる
  - インデックス
  - 

## B.要件仕様の作成

### B.1.データベースの設計
ER図をMermaid記法で記す。

(参考:https://docusaurus.io/docs/markdown-features/diagrams,
https://mermaid.js.org/config/accessibility.html#entity-relationship-diagram)

```mermaid
---
title: "PokemonCardDatabase"
---
erDiagram
    cardPacks ||--|{ cards  : ""
    cards }o -- o{ cardDecks  : ""
    users }o -- |{ cardDecks  : ""
    users |o -- o{ userCardHolder  : ""
    userCardHolder }o -- o{ cards  : ""

    users {
        bigint id PK "ID"
        varchar name "ユーザー名"
        timestamp created_at "作成日時"
        timestamp updated_at "更新日時"
    }

    cardPacks {
        bigint id PK "ID"
        varchar name "パック名"
        varchar regulation "レギュレーション"
        timestamp created_at "作成日時"
        timestamp updated_at "更新日時"
    }

    cards {
        bigint id PK "ID"
        bigint pack_id FK "パックID:cardPacks.id"
        varchar name "カード名"
        varchar card_type "カードタイプ"
        varchar image_s3_path "写真s3パス"
        bigint collection_number "コレクションナンバー"
        varchar rarity "レアリティ"
        varchar pokemon_type "ポケモンのタイプ"
        varchar special_card "特別なカード"
        varchar evolution_type "進化タイプ"
        varchar hit_point "HP"
        varchar characteristics "特性"
        varchar attack1_name "技1の名前"
        varchar attack1_energy "技1のエネルギー"
        varchar attack1_damage "技1のダメージ"
        varchar attack1_effect "技1の効果"
        varchar attack2_name "技2の名前"
        varchar attack2_energy "技2のエネルギー"
        varchar attack2_damage "技2のダメージ"
        varchar attack2_effect "技2の効果"
        varchar weakness "弱点"
        varchar resistance "抵抗力"
        varchar retreat "逃げるエネルギー"
        varchar attack2_effect "技2の効果"
        varchar attack2_effect "技2の効果"
        varchar trainers_effect "トレーナーの効果"
        varchar energy_effect "エネルギーの効果"
        varchar special_rule "特別なルール"
        varchar special_rule "イラストレーター"
        timestamp created_at "作成日時"
        timestamp updated_at "更新日時"
    }

    cardDecks {
        bigint id PK "ID"
        bigint user_id FK "ユーザーID: users"
        varchar card_1_id FK "カード1のID: cards"
        varchar card_2_id FK "カード2のID: cards"
        varchar card_3_id FK "カード3のID: cards"
        varchar card_4_id FK "カード4のID: cards"
        varchar card_5_id FK "カード5のID: cards"
        varchar card_6_id FK "カード6のID: cards"
        varchar card_7_id FK "カード7のID: cards"
        varchar card_8_id FK "カード8のID: cards"
        varchar card_9_id FK "カード9のID: cards"
        varchar card_10_id FK "カード10のID: cards"
        varchar card_11_id FK "カード11のID: cards"
        varchar card_12_id FK "カード12のID: cards"
        varchar card_13_id FK "カード13のID: cards"
        varchar card_14_id FK "カード14のID: cards"
        varchar card_15_id FK "カード15のID: cards"
        varchar card_16_id FK "カード16のID: cards"
        varchar card_17_id FK "カード17のID: cards"
        varchar card_18_id FK "カード18のID: cards"
        varchar card_19_id FK "カード19のID: cards"
        varchar card_20_id FK "カード20のID: cards"
        varchar card_21_id FK "カード21のID: cards"
        varchar card_22_id FK "カード22のID: cards"
        varchar card_23_id FK "カード23のID: cards"
        varchar card_24_id FK "カード24のID: cards"
        varchar card_25_id FK "カード25のID: cards"
        varchar card_26_id FK "カード26のID: cards"
        varchar card_27_id FK "カード27のID: cards"
        varchar card_28_id FK "カード28のID: cards"
        varchar card_29_id FK "カード29のID: cards"
        varchar card_30_id FK "カード30のID: cards"
        varchar card_31_id FK "カード31のID: cards"
        varchar card_32_id FK "カード32のID: cards"
        varchar card_33_id FK "カード33のID: cards"
        varchar card_34_id FK "カード34のID: cards"
        varchar card_35_id FK "カード35のID: cards"
        varchar card_36_id FK "カード36のID: cards"
        varchar card_37_id FK "カード37のID: cards"
        varchar card_38_id FK "カード38のID: cards"
        varchar card_39_id FK "カード39のID: cards"
        varchar card_40_id FK "カード40のID: cards"
        varchar card_41_id FK "カード41のID: cards"
        varchar card_42_id FK "カード42のID: cards"
        varchar card_43_id FK "カード43のID: cards"
        varchar card_44_id FK "カード44のID: cards"
        varchar card_45_id FK "カード45のID: cards"
        varchar card_46_id FK "カード46のID: cards"
        varchar card_47_id FK "カード47のID: cards"
        varchar card_48_id FK "カード48のID: cards"
        varchar card_49_id FK "カード49のID: cards"
        varchar card_50_id FK "カード50のID: cards"
        varchar card_51_id FK "カード51のID: cards"
        varchar card_52_id FK "カード52のID: cards"
        varchar card_53_id FK "カード53のID: cards"
        varchar card_54_id FK "カード54のID: cards"
        varchar card_55_id FK "カード55のID: cards"
        varchar card_56_id FK "カード56のID: cards"
        varchar card_57_id FK "カード57のID: cards"
        varchar card_58_id FK "カード58のID: cards"
        varchar card_59_id FK "カード59のID: cards"
        varchar card_60_id FK "カード60のID: cards"
        timestamp created_at "作成日時"
        timestamp created_by "作成者"
        timestamp updated_at "更新日時"
        timestamp updated_by "更新者"
    }

    userCardHolder {
        bigint id PK "ID"
        bigint user_id FK "ユーザーID:"
        varchar num "所持数"
        timestamp created_at "作成日時"
        timestamp created_by "作成者"
        timestamp updated_at "更新日時"
        timestamp updated_by "更新者"
    }

```

ポケモンカードの見方は[このサイト](https://snkrdunk.com/articles/15397/)を参考にした。
sqlの型一覧 : https://qiita.com/shuhoyo/items/07d28cec6babe788051d#varcharnmax%E5%9E%8B
